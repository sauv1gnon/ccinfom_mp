# ================== PRODUCTION GEOSERVICES ENVIRONMENT ==================
# Centralized configuration for all geoservices components

# ================== SERVICE PORTS ==================
ORS_HTTP_PORT=8080
NOMINATIM_HTTP_PORT=8081
TILESERVER_HTTP_PORT=8082

# ================== ORS CONFIGURATION ==================
# Memory and Performance Settings
ORS_XMS=4g                    # Initial heap size (minimum)
ORS_XMX=8g                    # Maximum heap size for production
ORS_JAVA_OPTS=-XX:+UseG1GC -XX:+UseStringDeduplication -XX:MaxGCPauseMillis=200 -XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap

# Graph Building and Routing
ORS_REBUILD_GRAPHS=false     # Set to true when data changes
ORS_CONTAINER_LOG_LEVEL=INFO # DEBUG, INFO, WARNING, ERROR, CRITICAL

# Custom Profile Settings
ORS_DRIVING_SPEED_FACTOR=1.0
ORS_PRIORITY_THRESHOLD=100.0
ORS_DISTANCE_INFLUENCE=40.0

# ================== NOMINATIM CONFIGURATION ==================
# Database and Performance
NOMINATIM_PASSWORD=ccinfom_prod_password_2024
NOMINATIM_THREADS=8          # Production recommended: CPU cores * 2
NOMINATIM_IMPORT_WIKIPEDIA=false
NOMINATIM_FLATNODE_ENABLED=true

# Data Update and Replication
NOMINATIM_REPLICATION_URL=https://download.geofabrik.de/asia/philippines-updates/
NOMINATIM_REPLICATION_INTERVAL=86400  # 24 hours in seconds

# ================== TILESERVER CONFIGURATION ==================
# Performance and Caching
TILESERVER_CACHE_SIZE=512MB
TILESERVER_MAX_THREADS=8
TILESERVER_ENABLE_PBF_COMPRESSION=true
TILESERVER_ENABLE_GZIP_COMPRESSION=true

# ================== NETWORK AND SECURITY ==================
# CORS Settings for Production
CORS_ALLOWED_ORIGINS=*
CORS_ALLOWED_METHODS=GET,POST,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With

# Security Headers
SECURITY_HEADERS_ENABLED=true

# ================== LOGGING AND MONITORING ==================
LOG_LEVEL=INFO
LOG_FORMAT=json
MONITORING_ENABLED=true

# Health Check Endpoints
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30

# ================== RESOURCE LIMITS ==================
# Docker Container Limits
ORACLE_MEMORY_LIMIT=8g
NOMINATIM_MEMORY_LIMIT=4g
TILESERVER_MEMORY_LIMIT=2g

# ================== DATA PATHS ==================
# Volume Mounts (these should match docker-compose.yml)
ORS_DATA_PATH=./ors
NOMINATIM_DATA_PATH=./nominatim
TILESERVER_DATA_PATH=./tileserver
MAP_DATA_PATH=./data

# ================== DEVELOPMENT FLAGS ==================
DEBUG_MODE=false
VERBOSE_LOGGING=false
ENABLE_METRICS=true

# ================== PRODUCTION DEPLOYMENT ==================
ENVIRONMENT=production
DEPLOYMENT_ID=geoservices-v1.0
BACKUP_ENABLED=true
BACKUP_INTERVAL=3600  # 1 hour

# ================== DATABASE CONFIGURATION ==================
# Nominatim PostgreSQL Database
POSTGRES_DB=nominatim
POSTGRES_USER=nominatim
POSTGRES_PASSWORD=${NOMINATIM_PASSWORD}
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_INITDB_ARGS="--encoding=UTF-8 --locale=C --auth-host=md5"